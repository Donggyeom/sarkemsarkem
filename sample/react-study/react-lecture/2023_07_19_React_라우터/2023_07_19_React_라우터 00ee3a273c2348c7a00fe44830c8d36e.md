# 2023_07_19_React_라우터

강의 번호: React
복습: Yes
키워드: router, 라우터

### 페이지 나누는 법

1. **페이지 나누는 법**
    
    1) 컴포넌트 만들어서 상세페이지내용 채운다.
    
    2) 예를들어, 누가 /detail 접속하면 그 컴포넌트 보여준다.
    

1. **React Dom 설치**
    
    1) 터미널
    
    ```jsx
    npm install react-router-dom@6
    ```
    
    2) index.js
    
    - index.js로 이동해서 App을 BrowserRouter로 감싸준다.
    
    ```jsx
    <BrowserRouter>
        <App />
    </BrowserRouter>
    ```
    

1. App.js 가서 import
    
    ```jsx
    import { Routes, Route, Link } from 'react-router-dom'
    
    return
    
    <Routes>
      <Route path="detail" element={<div>상세페이지임</div>}/> // 페이지라고 생각하면 됨
    </Routes>
    
    // 즉 ~~~/detail 로 이동하는 페이지 만드는 작업
    ```
    
    ![Untitled](2023_07_19_React_%E1%84%85%E1%85%A1%E1%84%8B%E1%85%AE%E1%84%90%E1%85%A5%2000ee3a273c2348c7a00fe44830c8d36e/Untitled.png)
    
    - 이동하면 이렇게 보임
    - element 안에는 보여줄 컨텐츠 넣으면 됨 (컴포넌트화 하면 편함)

### 페이지 이동 버튼 만들기

1. **Link 사용**
    
    ```jsx
    <Link to="/">홈</Link>       -------> '홈'이라고 표시되는 메인 페이지로 이동하는 링크
    <Link to="/detail">상세페이지</Link> -----> '상세페이지 라고 표시되는 /detail 로 이동하는 링크
    ```
    
2. **useNavigate**
    - useNavigate : 다른 페이지로 이동할 수 있게 만들어줌
        - useNavigate(-1) : 이전 페이지로 이동
        - useNavigate(1) : 앞 페이지로 이동
    - Outlet :
    
    ```jsx
    import { useNavigate } from 'react-router-dom'
    
    let navigate = useNavigate();
    
    <Nav className="me-auto">
          <Nav.Link onClick={()=>{navigate('/')}}>Home</Nav.Link>
    			<Nav.Link onClick={()=>{navigate(1)}}>이전</Nav.Link>
          <Nav.Link onClick={()=>{navigate('/detail')}}>Detail</Nav.Link>
    </Nav>
    ```
    

### 각각 페이지 컴포넌트화

1. **폴더 하나 만들어서 보관하기**
    
    ![Untitled](2023_07_19_React_%E1%84%85%E1%85%A1%E1%84%8B%E1%85%AE%E1%84%90%E1%85%A5%2000ee3a273c2348c7a00fe44830c8d36e/Untitled%201.png)
    
2. **App.js에서 import 해서 사용**

### 404 페이지

- **없는 페이지일 경우 나타나도록**

```jsx
<Route path="*" element={<div>없는페이지임</div>}/> // 페이지라고 생각하면 됨
```

### 하위페이지의 하위페이지

1. **불편한 방법**
    
    ```jsx
    <Route path="about" element={<About/>}/>
    <Route path="about/member" element={<About/>}/>
    <Route path="about/location" element={<About/>}/>
    ```
    
2. **편리한 방법(nested routes)**
    - **유사한 페이지 여러개 필요할 때 사용함**
    - **about/member 접속시 About 컴포넌트 & 멤버임 둘다 보임**
    
    ```jsx
    <Route path="/" element={메인페이지/>}>
    
        <Route path="/about" element={<About/>}>
          <Route path="member" element={<div>멤버임</div>}/>
          <Route path="location" element={<About/>}/>
        </Route>
        
    </Route>
    ```
    
3. **Outlet**
    - **nested routes 사용시 어디에 보여줄지 설정하는 것**
    - **about/member 접속 시 About에서 member를 어디에 보여줄지 정해주는 것**
    
    ```jsx
    function About(){
      return(
        <div>
          <h4>회사정보임</h4>
          <Outlet></Outlet>
        </div>
      )
    }
    ```
    

### 상세페이지 여러개 만들기 (URL 파라미터)

1. **detail에서 shoes 정보 전송**
    
    ```jsx
    <Route path="/detail" element={<Detail shoes={shoes}/>}/>
    ```
    
2. **detail 컴포넌트에서 props 등록**
    
    ```jsx
    function Detail(props){
    ```
    
3. **상세페이지에서 꺼내쓰기**
    
    ```jsx
    {props.shoes.~~~~}
    
    예)
    {props.shoes[0].content}
    ```
    
4. **URL 파라미터**
    - <Route path="/detail/:id" element={<Detail shoes={shoes}/>}/>
    - 위에서 "/detail/:id"는 /detail/아무거나 라는 뜻
    - APP.js에서 id라고 작명되어 넘겨준 것을 detail.js에서 꺼내 쓰면 됨
    
    ```jsx
    // APP.js에서
    
    <Route path="/detail/**:id**" element={<Detail shoes={shoes}/>}/>
    
    // detail.js에서
    
    function Detail(props){
      
      **let {id} = useParams();**
      
      return(
        <div className="container">
          <div className="row">
            <div className="col-md-6">
              <img src="https://codingapple1.github.io/shop/shoes1.jpg" width="100%" />
            </div>
            <div className="col-md-6">
              <h4 className="pt-5">{props.shoes[id].title}</h4>
              <p>{props.shoes[id].content}</p>
              <p>{props.shoes[id].price}</p>
              <button className="btn btn-danger">주문하기</button> 
            </div>
          </div>
        </div> 
      )
    }
    ```
    
    - **id에 이상한 값을 입력하면?**
        - 조건문 사용해서 처리해주면 됨
    - **URL 파라미터는 여러개 사용 가능**
        
        ```jsx
        // APP.js에서
        
        <Route path="/detail/**:id/:id2**" element={<Detail shoes={shoes}/>}/>
        ```
        

1. **정렬했을 때 다른 상세페이지 보여주면 이상한 페이지 보여줌**
    - **props.shoes.find((x) => [x.id](http://x.id/) == id 라고 써도 됨**
    
    ```jsx
    function Detail(props){
    
      let { id } = useParams();
      let 찾은상품 = props.shoes.find(function(x){
        return x.id == id
      });
    
      return (
        <div className="container">
          <div className="row">
            <div className="col-md-6">
              <img src="https://codingapple1.github.io/shop/shoes1.jpg" width="100%" />
            </div>
            <div className="col-md-6 mt-4">
              <h4 className="pt-5">{찾은상품.title}</h4>
              <p>{찾은상품.content}</p>
              <p>{찾은상품.price}원</p>
              <button className="btn btn-danger">주문하기</button> 
            </div>
          </div>
      </div>  
      )
    };
    
    export default Detail
    ```